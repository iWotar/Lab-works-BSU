# Лабораторная 1


### Сборка
Запуск проекта в clion.
Запуск *CMakeLists.txt* с помощью ```cmake --build.```
### Паттерн Visitor
В работе было реализовано 2 класса отвечающих за очереди: ```Line``` – обычная очередь, ```Chaos``` – очередь
тех, кто пытается влезть. ```Line``` наследуется от ```Queue```, и представляет из себя собственный набор
данных, работающий на ```Node``` – структуре имеющей информацию и ссылку на следующий ```Node```. ```Chaos```
наследуется от ```Line```, с добавлением удаления элемента по предшествующему итератору.

Visitor-ом в этой программе выступает класс ```Seller```, который с помощью двойной диспетчеризации
обрабатывает структуры. В ```Line``` он удаляет первого, в ```Chaos``` он удаляет самого сильного. Класс ```Queue``` отвечает за диспетчеризацию, предоставляя виртуальный метод потомкам.

### Паттерн Iterator
Итератор ```IterLine``` был сделан один для двух структур, так как одна являются наследником для другой.
Реализовано итерирование вперед по списку и операторы сравнения, что позволяет настроить
совместимость со стандартной библиотекой, как *forward_iterator*.

### Паттерн MVC
| *Model* | *Controller* | *View*|
|:-------:|:------------:|:-----:|
|*node.cpp, man.cpp, iter_line.cpp, line.h, line.cpp, chaos.cpp, seller.cpp, chaos.h, iter_line.h, seller.h, queue.h, Node.h, logic.cpp, logic.h.*|  *controller.cpp, controller.h.*| *main.cpp, painter.cpp, painter.h.*|

Программа работает следующим образом: ```Painter``` содержит указатель на ```Controller```, тот в свою
очередь на ```Logic```, который является основной частью модуля и проводит вычисления. ```Controller``` имеет доступ к данным модуля, по средствам интерфейса ```Logic```. А ```Painter``` имеет доступ к данным только через метод ```Controller.getData()```, который обрабатывает информацию и отдает ее в векторах с числами, в то время как в модуле хранятся данные типа ```Man``` в структурах ```Line``` и ```Chaos```.

В обратную сторону ```Painter``` может посылать сигнал в ```Controller.signal()```, а контроллер посылает
сигнал ```Logic```, который вызывает обработку очередей и возвращает логическую переменную, которая
показывает есть ли еще люди в очередях. Таким образом программа закрывается, когда люди
закончатся.

Во *View* есть таймер, которые каждые пол секунды посылает сигнал контроллеру, или сигнал можно
послать нажатием мыши. Шаг обработки в ```Logic``` – это случайный выбор очереди и удаление первого
элемента, для ```Line```, или наибольшего, для ```Chaos```. Во программе размер элемента отображается
насыщенностью цвета круга.